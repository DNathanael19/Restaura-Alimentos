<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style/index.css">
    <title>Restaura Alimentos</title>
</head>
<body>
    <header class="menu">
        <nav>
            <ul class="lista">
                <li><a href="#container">Home</a></li>
                <li><a href="#container-3">Sobre</a></li>
                <li><a href="#container-4">Importância</a></li>
                <li><a href="#container-5">Curiosidades</a></li>
                <li><a href="#container-6">Gráfico</a></li>
            </ul>
        </nav>
    </header>

    <main class="container-geral">
        <section id="container" class="section">
            <div class="container1">
                <div class="txt-container1">
                    <h1>Restaura Alimentos</h1>
                </div>
            </div>
            <div class="container-2">
                <div class="txt-container2">
                    <p>Bem-vindo à nossa comunidade dedicada a reduzir o desperdício de alimentos e promover práticas mais sustentáveis. Todos os dias, toneladas de comida boa são jogadas fora enquanto milhões de pessoas passam fome ao redor do mundo</p>
                    <br>
                    <p>Juntos podemos mudar isso.</p>
                </div>
                <div class="img-container2"></div>
            </div>
        </section>

        <section id="container-3" class="section"></section>

        <section id="container-4" class="section"></section>

        <section id="container-5" class="section"></section>

        <section id="container-6" class="section">
            <div class="txt-container1">
                <h1>Gráfico de Disperdício</h1>
            </div>
            <div class="charts-container">
                <canvas id="barra"></canvas>
                <canvas id="pizza"></canvas>
            </div>
        </section>
    </main>

    <script src="./js/index.js"></script>
      
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx_barra = document.getElementById('barra');
        const ctx_pizza = document.getElementById('pizza');

        const data_barra = {
            labels: ['Restaurantes Fast Food', 'Restaurantes com Serviço Completo'],
            datasets: [{
                label: 'Disperdício (%)',
                data: [9.55, 11.30], // Valores já em porcentagem
                backgroundColor: [
                    'rgb(255,87,51)',
                    'rgb(255,87,51)'
                ],
                borderWidth: 1
            }]
        };
      
        new Chart(ctx_barra, {
            type: 'bar',
            data: data_barra,
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 20, 
                        ticks: {
                            callback: function(value) {
                                return value + '%'; // Adiciona o símbolo de porcentagem aos valores
                            }
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.raw + '%'; // Adiciona o símbolo de porcentagem aos tooltips
                            }
                        }
                    }
                }
            }
        });

        const data_pizza = {
            labels: ['Realizão doação', 'Doa dependendo da situação', 'Não doam'],
            datasets: [{
                label: '',
                data: [60, 30, 10], // Valores baseados em porcentagem
                backgroundColor: [
                    'rgb(255,87,51)',
                    'rgb(54, 162, 235)',
                    'rgb(255, 205, 86)'
                ],
                hoverOffset: 4
            }]
        };

        new Chart(ctx_pizza, {
            type: 'pie',
            data: data_pizza,
            options: {
                responsive: true,
                layout: {
                    padding: 10
                },
                plugins: {
                    legend: {
                        position: 'right',
                        labels: {
                            padding: 20,
                            formatter: function(value, context) {
                                const dataset = context.chart.data.datasets[0];
                                const total = dataset.data.reduce((prevValue, currentValue) => prevValue + currentValue);
                                const percentage = (value / total * 100).toFixed(2);
                                return `${context.chart.data.labels[context.dataIndex]}: ${percentage}%`;
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const dataset = context.dataset;
                                const total = dataset.data.reduce((prevValue, currentValue) => prevValue + currentValue);
                                const value = dataset.data[context.dataIndex];
                                const percentage = (value / total * 100).toFixed(2);
                                return `${percentage}%`;
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>